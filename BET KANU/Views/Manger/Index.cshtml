@model ProductVM
<link rel="stylesheet" href="~/css/dashboard.css">

@{
    ViewBag.Title = "Products List";
}
<div id="wrapper">
    <section class="bg-success promo">
        <div class="container">
            <h1 style="color:white"> &nbsp;List</h1>
        </div>
    </section>

    <section>
        <div class="container">
            @if (TempData["Messagee"] != null)
            {
                <div class="alert alert-success">

                    @Html.Raw(TempData["Messagee"]) <i class="fa fa-check"></i>
                </div>
            }
            @if (TempData["AlertMessage"] != null)
            {
                <div class="alert alert-danger">

                    @Html.Raw(TempData["AlertMessage"]) <i class="fa fa-check"></i>
                </div>
            }
            <div class="col-md-12 create">

                <div class="btn-list">
                    <div class="d-flex" style="justify-content: space-between;">
               
                        <div class="btn-list sorting clearfix center-grid">
                            <div class="radio_wrap btn btn-success" style="margin-right:10px" data-radio="radio_1">

                                <span class="radio_mark">
                                    Product
                                </span>
                            </div>
                            <div class="radio_wrap btn btn-success" data-radio="radio_2">
                                <span class="radio_mark">
                                    Sales Item
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
    
            </div>

            <div class="card">

                <div class="content">
                    <div class="radio_content radio_1">
                        <div class="card-header">
                            <div class="btn-list">
                                <div class="d-flex" style="justify-content: space-between;">
                                    <div class="d-flex">

                                        <div class="dropdown me-3">
                                            <button class="btn btn-Create dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                Create New Product
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li> <a class="dropdown-item" asp-action="CreateSong" type="button"> Create New Song <i class="fa-solid fa-plus"></i></a></li>
                                                <li><a class="dropdown-item" asp-action="CreateBook" type="button"> Create New Book <i class="fa-solid fa-plus"></i></a></li>
                                                <li> <a class="dropdown-item" asp-action="CreateSoftware" type="button"> Create New Software <i class="fa-solid fa-plus"></i></a></li>
                                                <li><a class="dropdown-item" asp-controller="Cartoon" asp-action="CreateCartoonSeries" type="button">Create new Cartoon-Series <i class="fa-solid fa-plus"></i></a></li>
                                                @* <li><a class="dropdown-item" asp-controller="Cartoon" asp-action="CreateEpisode" type="button">Create new Cartoon Episode <i class="fa-solid fa-plus"></i></a></li>*@
                                                <li><a class="dropdown-item" asp-action="AddSale" type="button">Create Sale Product <i class="fa-solid fa-plus"></i></a></li>
                                                <li class="divider"></li>
                                            </ul>
                                        </div>
                                        <div class="dropdown">
                                            <button href="#" class="btn btn-Create dropdown-toggle" id="dropdown-menu" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fa fa-pencil"></i> </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="@Url.Action("Index","Manger",new{Select = "Books"})">Books</a></li>
                                                <li><a class="dropdown-item" href="@Url.Action("Index","Manger",new{Select = "Songs"})">Songs</a></li>
                                                <li><a class="dropdown-item" href="@Url.Action("Index","Manger",new{Select = "CartoonSeries"})">Cartoon Series</a></li>
                                                <li><a class="dropdown-item" href="@Url.Action("Index","Manger",new{Select = "Software"})">Software</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="myTable" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th class="wd-15p" style="color:white">@Html.DisplayNameFor(model => model.product.Id)</th>
                                            <th class="wd-15p" style="color:white">@Html.DisplayNameFor(model => model.product.Title)</th>
                                            <th class="wd-15p" style="color:white">@Html.DisplayNameFor(model => model.product.Category)</th>
                                            <th class="wd-20p " style="color:white">@Html.DisplayNameFor(model => model.product.TargetAudince)</th>
                                            @*<th>@Html.DisplayNameFor(model => model.SmallImage)</th>*@
                                            <th class="wd-10p" style="color:white">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var i in Model.products)
                                        {
                                            <tr style="color:white">
                                                <td>@Html.DisplayFor(model => i.Id)</td>
                                                <td>@Html.DisplayFor(model => i.Title)</td>
                                                <td>@Html.DisplayFor(model => i.Category)</td>
                                                <td>@Html.DisplayFor(model => i.TargetAudince)</td>
                                                @*<td><a href="@Html.DisplayFor(model => i.SmallImage)"> <img src="@Html.DisplayFor(model => i.SmallImage)"/></a></td>*@

                                                @if (i.Category == Category.CartoonSeries)
                                                {
                                                    <td>
                                                        <a class="btn btn-icon btn-info" asp-controller="Cartoon" asp-action="EditCartoonSeries" asp-route-id="@i.Id"><i class="fa-solid fa-pen-to-square"></i>Edit</a>
                                                       @* <a class="btn btn-icon btn-orange btn-danger  " asp-controller="Cartoon" asp-action="Delete" asp-route-id="@i.Id"><i class="fa-solid fa-trash-can"></i>Delete</a>*@
                                                        <!-- Button to trigger the modal -->
                                                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#staticBackdrop-@(i.Id)">
                                                            Delete
                                                        </button>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="staticBackdrop-@(i.Id)" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Delete</h1>
                                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        Are you sure you want to Delete This @i.Title @i.Category ?
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                                        <form asp-action="DeletePost" asp-controller="Manger" asp-route-id="@i.Id" method="post">
                                                                            <button type="submit" class="btn btn-danger">Delete</button>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>                                        
                                                    </td>
                                                }
                                                else
                                                {
                                                    <td>
                                                        <a class="btn btn-icon btn-info" asp-controller="Manger" asp-action="Edit" asp-route-id="@i.Id"><i class="fa-solid fa-pen-to-square"></i>Edit</a>
                                                       @* <a class="btn btn-icon btn-orange btn-danger  " asp-controller="Manger" asp-action="Delete" asp-route-id="@i.Id"><i class="fa-solid fa-trash-can"></i>Delete</a>*@
                                                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#staticBackdrop-@(i.Id)">
                                                            Delete
                                                        </button>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="staticBackdrop-@(i.Id)" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Delete</h1>
                                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        Are you sure you want to Delete This @i.Title @i.Category ?
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                                        <form asp-action="DeletePost" asp-controller="Manger" asp-route-id="@i.Id" method="post">
                                                                            <button type="submit" class="btn btn-danger">Delete</button>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </td>
                                                }
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

             
                <div class="radio_content radio_2">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="myTable2" class="table table-striped table-bordered" style="width:100%">
                                <thead>
                                    <tr>
                                        <th class="wd-15p" style="color:white">@Html.DisplayNameFor(model => model.Shop.Id)</th>
                                        <th class="wd-15p" style="color:white">@Html.DisplayNameFor(model => model.Shop.Name)</th>
                                        <th class="wd-20p " style="color:white">@Html.DisplayNameFor(model => model.Shop.Price)</th>
                                        @*<th>@Html.DisplayNameFor(model => model.SmallImage)</th>*@
                                        <th class="wd-10p" style="color:white">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var si in Model.Shops)
                                    {
                                        <tr>
                                            <td>@Html.DisplayFor(model => si.Id)</td>
                                            <td>@Html.DisplayFor(model => si.Name)</td>
                                            <td>@Html.DisplayFor(model => si.Price)</td>
                                            @*<td><a href="@Html.DisplayFor(model => i.SmallImage)"> <img src="@Html.DisplayFor(model => i.SmallImage)"/></a></td>*@
                                            <td>
                                                <a class="btn btn-icon btn-info" asp-controller="Manger" asp-action="EditSale" asp-route-id="@si.Id"><i class="fa-solid fa-pen-to-square"></i>Edit</a>
                                                @*<a class="btn btn-icon btn-orange btn-danger  " asp-controller="Manger" asp-action="DeleteSales" asp-route-id="@si.Id"><i class="fa-solid fa-trash-can"></i>Delete</a>*@
                                                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#staticBackdropp-@(si.Id)">
                                                    Delete
                                                </button>
                                                <!-- Modal -->
                                                <div class="modal fade" id="staticBackdropp-@(si.Id)" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h1 class="modal-title fs-5" id="staticBackdropLabel">Delete</h1>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                Are you sure you want to Delete This @si.Name Product ?
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                                <form asp-action="RemoveSales" asp-controller="Manger" asp-route-id="@si.Id" method="post">
                                                                    <button type="submit" class="btn btn-danger">Delete</button>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>   </div>
            </div>
        </div>
    </section>
<partial name="_LoginPartial" />
</div>

@section scripts{
    <!--Start Filter -->
    <script>
        $(document).ready(function () {
            /* by default hide all radio_content div elements except first element */
            $(".content .radio_content").hide();
            $(".content .radio_content:first-child").show();

            /* when any radio element is clicked, Get the attribute value of that clicked radio element and show the radio_content div element which matches the attribute value and hide the remaining tab content div elements */
            $(".radio_wrap").click(function () {
                var current_raido = $(this).attr("data-radio");
                $(".content .radio_content").hide();
                $("." + current_raido).show();
            })
        });
    </script>
    <!--End Filter -->

    <!-- Data table js -->
    <script src="https://cdn.datatables.net/v/dt/dt-1.13.5/datatables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>
    <script>
        $(function (e) {
            $('#myTable').DataTable();
        }); 
    </script>
    <script>
        $(function (e) {
            $('#myTable2').DataTable();
        });
    </script>
   }
